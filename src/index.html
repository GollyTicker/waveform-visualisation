<!DOCTYPE html>
<html>

<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta content="utf-8" http-equiv="encoding">
  <title>Convert audio files to visualised waveform data</title>
  <script src="__DEPLOY_PATH__/bundle.iife.js"></script>
  <script src="__DEPLOY_PATH__/whammy.js"></script>
  <script src="__DEPLOY_PATH__/converter.js"></script>
  <style>
    body {
      color: white;
    }

    div {
      margin: 15px;
    }

    #convertFullButton {
      margin: 10px;
      border: white 3px dashed;
      font-size: 1.2em;
    }

    #convertStepButton {
      margin: 10px;
      font-size: 0.8em;
    }

    #canvas {
      border: white dashed 2px;
    }

    #recordingIndicator.active {
      color: darkred;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <h2>
    Waveform visualiser
  </h2>
  <ol>
    <li>This tool only works with Google Chrome v<b>91 or older</b>. v<b>92</b> is currently not supported yet.
    Please find the newest Chrome <i>before July 2021</i> <a href="https://www.slimjet.com/chrome/google-chrome-old-version.php">here</a>. Download it, run it and then
    open this webpage inside it. Note, that it will <b>install over your existing chrome!</b></li>
    <li>Upload your audio file</li>
    <li>Click on <b>Convert Full Audio</b> once. It will playback the audio from beginning to end and convert everything.
    <li>Alternatively, to convert a segment of the audio you can follow these steps:
      <ol>
        <li>In the audio player, move to the position where you want to start the visualisation at.</li>
        <li>Click once on <b>Conversion step</b> to start. The audio will playback and the visualisation will be drawn and recorded.</li>
        <li>When you reach moment in the audio until where you want to convert, simply click on <b>Conversion step</b> again to stop the playback. The recorded visualisation will be converted to a video.</li>
      </ol>
    </li>
    <li>When the conversion is finished, the video will automatically play the recording. (the conversion can take a while for long audio files.)</li>
    <li>Finally you can right click on the video and click "Save video as..." to save it.</li>
  </ol>

  <div>
    <input title="Upload your audio file" style="color:white" id="uploader" type="file" onchange="handleUploadedFile(this.files[0]);">
  </div>

  <div>
    <audio controls id="audio" src=""></audio>
  </div>

  <div>
    <canvas id="canvas" width="800" height="180"></canvas>
  </div>

  <div>
    <p>
      Status: <span id="recordingIndicator"></span>
    </p>

    <button type="button" id="convertFullButton" name="convertFull">
      Convert Full Audio
    </button>

    <button type="button" id="convertStepButton" name="convertStep">
      Conversion step
    </button>
  </div>

  <div>
    <video controls autoplay width="800" height="180" id="video"></video>
  </div>
</body>

</html>
